From: Alexander Gerasiov <gq@debian.org>
Subject: Debian-specific changes in ldapscripts.conf and runtime
 In Debian we try to use some knowlege from other configs (see runtime.debian).
 So I commented out some values here, and add notes for Debian users.
 I've alo commented usage of some tools, suggested, but not really needed for
 common work.
 .
 Inclusion of runtime.debian added to runtime file.
Forwarded: not-needed

Index: ldapscripts/etc/ldapscripts.conf
===================================================================
--- ldapscripts.orig/etc/ldapscripts.conf	2012-08-27 02:44:26.000000000 +0400
+++ ldapscripts/etc/ldapscripts.conf	2012-08-27 03:05:12.000000000 +0400
@@ -16,14 +16,22 @@
 #  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307,
 #  USA.
 
+# Note for Debian users:
+# On Debian system ldapscripts will try to parse and use nslcd config.
+# Look on commented variables and description lines started with DEBIAN.
+# But you could override it's values here.
+
+
 # LDAP server
-SERVER="ldap://localhost"
+# DEBIAN: value from /etc/nslcd.conf (uri) is used.
+#SERVER="ldap://localhost"
 
 # Suffixes
-SUFFIX="dc=example,dc=com" # Global suffix
-GSUFFIX="ou=Groups"        # Groups ou (just under $SUFFIX)
-USUFFIX="ou=Users"         # Users ou (just under $SUFFIX)
-MSUFFIX="ou=Machines"      # Machines ou (just under $SUFFIX)
+# DEBIAN: values from /etc/nslcd.conf (base maps) are used.
+#SUFFIX="dc=example,dc=com" # Global suffix
+#GSUFFIX="ou=Groups"        # Groups ou (just under $SUFFIX)
+#USUFFIX="ou=Users"         # Users ou (just under $SUFFIX)
+#MSUFFIX="ou=Machines"      # Machines ou (just under $SUFFIX)
 
 # Authentication type
 # If empty, use simple authentication
@@ -60,11 +68,12 @@
 #GDUMMYMEMBER="uid=dummy,$USUFFIX,$SUFFIX"
 
 # User properties
-USHELL="/bin/sh"
-UHOMES="/home/%u"     # You may use %u for username here
+# DEBIAN: values from /etc/adduser.conf are used.
+#USHELL="/bin/sh"
+#UHOMES="/home/%u"     # You may use %u for username here
 CREATEHOMES="no"      # Create home directories and set rights ?
-HOMESKEL="/etc/skel"  # Directory where the skeleton files are located. Ignored if undefined or nonexistant.
-HOMEPERMS="700"       # Default permissions for home directories
+#HOMESKEL="/etc/skel"  # Directory where the skeleton files are located. Ignored if undefined or nonexistant.
+#HOMEPERMS="755"       # Default permissions for home directories
 
 # User passwords generation
 # Command-line used to generate a password for added users.
@@ -72,11 +81,12 @@
 # WARNING    !!!! This is evaluated, everything specified here will be run !
 # WARNING(2) !!!! Some systems (Linux) use a blocking /dev/random (waiting for enough entropy).
 #                 In this case, consider using /dev/urandom instead.
-PASSWORDGEN="cat /dev/random | LC_ALL=C tr -dc 'a-zA-Z0-9' | head -c8"
+#PASSWORDGEN="cat /dev/random | LC_ALL=C tr -dc 'a-zA-Z0-9' | head -c8"
 #PASSWORDGEN="pwgen"
 #PASSWORDGEN="echo changeme"
 #PASSWORDGEN="echo %u"
 #PASSWORDGEN="<ask>"
+PASSWORDGEN="pwgen"
 
 # User passwords recording
 # you can keep trace of generated passwords setting PASSWORDFILE and RECORDPASSWORDS
@@ -90,7 +100,7 @@
 LOGFILE="/var/log/ldapscripts.log"
 
 # Temporary folder
-TMPDIR="/tmp"
+#TMPDIR="/tmp"
 
 # Various binaries used within the scripts
 # Warning : they also use uuencode, date, grep, sed, cut, which... 
@@ -107,12 +117,12 @@
 
 # Character set conversion : $ICONVCHAR <-> UTF-8
 # Comment ICONVBIN to disable UTF-8 conversion
-ICONVBIN="/usr/bin/iconv"
+#ICONVBIN="/usr/bin/iconv"
 #ICONVCHAR="ISO-8859-15"
 
 # Base64 decoding
 # Comment UUDECODEBIN to disable Base64 decoding
-UUDECODEBIN="/usr/bin/uudecode"
+#UUDECODEBIN="/usr/bin/uudecode"
 
 # Getent command to use - choose the ones used
 # on your system. Leave blank or comment for auto-guess.
Index: ldapscripts/lib/runtime
===================================================================
--- ldapscripts.orig/lib/runtime	2012-08-27 02:44:26.000000000 +0400
+++ ldapscripts/lib/runtime	2012-08-27 03:01:53.000000000 +0400
@@ -680,6 +680,9 @@
 
 ### Source configuration file
 
+_RUNTIME_DEBIAN="/usr/share/ldapscripts/runtime.debian"
+. "$_RUNTIME_DEBIAN" || end_die "Unable to source runtime.debian, exiting..."
+
 _CONFIGFILE="/etc/ldapscripts/ldapscripts.conf"
 . "$_CONFIGFILE" || end_die "Unable to source configuration file ($_CONFIGFILE), exiting..."
 
